
NAME=ppc add instructions
FILE=bins/elf/ppc/ppc_insn_tests_32
ARGS=-appc
CMDS=<<EOF
af
s loc.add_insns
aezi
aezse 14
EOF
EXPECT=<<EOF
pc_write(old: 0x8000034, new: 0x8000038)
var_write(name: r1, old: 0x0, new: 0x1)
pc_write(old: 0x8000038, new: 0x800003c)
var_write(name: r2, old: 0x0, new: 0x2)
pc_write(old: 0x800003c, new: 0x8000040)
var_write(name: r3, old: 0x0, new: 0x3)
pc_write(old: 0x8000040, new: 0x8000044)
var_write(name: r4, old: 0x0, new: 0x4)
var_write(name: cr0, old: 0x0, new: 0x2)
pc_write(old: 0x8000044, new: 0x8000048)
var_write(name: r10, old: 0x0, new: 0xffff)
pc_write(old: 0x8000048, new: 0x800004c)
var_write(name: r11, old: 0x0, new: 0x10000)
var_write(name: ca, old: 0x0, new: 0x0)
var_write(name: ca32, old: 0x0, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x2)
pc_write(old: 0x800004c, new: 0x8000050)
var_write(name: r11, old: 0x10000, new: 0xffffffff)
var_write(name: ca, old: 0x0, new: 0x0)
var_write(name: ca32, old: 0x0, new: 0x0)
pc_write(old: 0x8000050, new: 0x8000054)
var_write(name: r12, old: 0x0, new: 0x0)
var_write(name: ca, old: 0x0, new: 0x1)
var_write(name: ca32, old: 0x0, new: 0x1)
var_write(name: cr0, old: 0x0, new: 0x4)
pc_write(old: 0x8000054, new: 0x8000058)
var_write(name: r13, old: 0x0, new: 0x2)
var_write(name: ca, old: 0x1, new: 0x0)
var_write(name: ca32, old: 0x1, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x2)
pc_write(old: 0x8000058, new: 0x800005c)
var_write(name: r12, old: 0x0, new: 0x0)
var_write(name: ca, old: 0x0, new: 0x1)
var_write(name: ca32, old: 0x0, new: 0x1)
var_write(name: cr0, old: 0x0, new: 0x4)
pc_write(old: 0x800005c, new: 0x8000060)
var_write(name: r16, old: 0x0, new: 0x0)
var_write(name: ca, old: 0x1, new: 0x0)
var_write(name: ca32, old: 0x1, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x4)
pc_write(old: 0x8000060, new: 0x8000064)
var_write(name: r12, old: 0x0, new: 0x0)
var_write(name: ca, old: 0x0, new: 0x1)
var_write(name: ca32, old: 0x0, new: 0x1)
var_write(name: cr0, old: 0x0, new: 0x4)
pc_write(old: 0x8000064, new: 0x8000068)
var_write(name: r17, old: 0x0, new: 0x1)
var_write(name: ca, old: 0x1, new: 0x0)
var_write(name: ca32, old: 0x1, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x4)
pc_write(old: 0x8000068, new: 0x800006c)
var_write(name: r17, old: 0x1, new: 0xffffffff)
var_write(name: ca, old: 0x0, new: 0x0)
var_write(name: ca32, old: 0x0, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x1)
EOF
RUN

NAME=ppc add instructions
FILE=bins/elf/ppc/ppc_insn_tests_32
ARGS=-appc
CMDS=<<EOF
af
s loc.sub_insns
aezi
aezse 18
EOF
EXPECT=<<EOF
pc_write(old: 0x8000070, new: 0x8000074)
var_write(name: r0, old: 0x0, new: 0x0)
pc_write(old: 0x8000074, new: 0x8000078)
var_write(name: r1, old: 0x0, new: 0x1)
pc_write(old: 0x8000078, new: 0x800007c)
var_write(name: r2, old: 0x0, new: 0x2)
pc_write(old: 0x800007c, new: 0x8000080)
var_write(name: r3, old: 0x0, new: 0x3)
pc_write(old: 0x8000080, new: 0x8000084)
var_write(name: r1, old: 0x1, new: 0x1)
var_write(name: cr0, old: 0x0, new: 0x2)
pc_write(old: 0x8000084, new: 0x8000088)
var_write(name: r0, old: 0x0, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x4)
pc_write(old: 0x8000088, new: 0x800008c)
var_write(name: r11, old: 0x0, new: 0xffffffff)
var_write(name: cr0, old: 0x0, new: 0x1)
pc_write(old: 0x800008c, new: 0x8000090)
var_write(name: r11, old: 0xffffffff, new: 0xffffffff)
var_write(name: ca, old: 0x0, new: 0x0)
var_write(name: ca32, old: 0x0, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x1)
pc_write(old: 0x8000090, new: 0x8000094)
var_write(name: r0, old: 0x0, new: 0x0)
var_write(name: ca, old: 0x0, new: 0x1)
var_write(name: ca32, old: 0x0, new: 0x1)
var_write(name: cr0, old: 0x0, new: 0x4)
pc_write(old: 0x8000094, new: 0x8000098)
var_write(name: r11, old: 0xffffffff, new: 0xffffffff)
var_write(name: ca, old: 0x1, new: 0x0)
var_write(name: ca32, old: 0x1, new: 0x0)
pc_write(old: 0x8000098, new: 0x800009c)
var_write(name: r0, old: 0x0, new: 0x0)
var_write(name: ca, old: 0x0, new: 0x1)
var_write(name: ca32, old: 0x0, new: 0x1)
pc_write(old: 0x800009c, new: 0x80000a0)
var_write(name: r11, old: 0xffffffff, new: 0xffffffff)
var_write(name: ca, old: 0x1, new: 0x0)
var_write(name: ca32, old: 0x1, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x1)
pc_write(old: 0x80000a0, new: 0x80000a4)
var_write(name: r12, old: 0x0, new: 0xfffffffe)
var_write(name: ca, old: 0x0, new: 0x0)
var_write(name: ca32, old: 0x0, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x1)
pc_write(old: 0x80000a4, new: 0x80000a8)
var_write(name: r13, old: 0x0, new: 0xfffffffd)
var_write(name: ca, old: 0x0, new: 0x1)
var_write(name: ca32, old: 0x0, new: 0x1)
var_write(name: cr0, old: 0x0, new: 0x1)
pc_write(old: 0x80000a8, new: 0x80000ac)
var_write(name: r12, old: 0xfffffffe, new: 0xfffffffe)
var_write(name: ca, old: 0x1, new: 0x0)
var_write(name: ca32, old: 0x1, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x1)
pc_write(old: 0x80000ac, new: 0x80000b0)
var_write(name: r11, old: 0xffffffff, new: 0xffffffff)
var_write(name: ca, old: 0x0, new: 0x0)
var_write(name: ca32, old: 0x0, new: 0x0)
var_write(name: cr0, old: 0x0, new: 0x1)
pc_write(old: 0x80000b0, new: 0x80000b4)
var_write(name: r0, old: 0x0, new: 0x0)
var_write(name: ca, old: 0x0, new: 0x1)
var_write(name: ca32, old: 0x0, new: 0x1)
var_write(name: cr0, old: 0x0, new: 0x4)
pc_write(old: 0x80000b4, new: 0x80000b8)
var_write(name: r10, old: 0x0, new: 0x0)
var_write(name: ca, old: 0x1, new: 0x1)
var_write(name: ca32, old: 0x1, new: 0x1)
var_write(name: cr0, old: 0x0, new: 0x4)
EOF
RUN